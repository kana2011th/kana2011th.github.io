$(function(){function e(){return(new TimelineMax).to("#logo",1,{css:{height:"2rem"},ease:Circ.easeOut}).to("#logo-motd",1,{height:0,ease:Circ.easeOut},"-=1").to("#kana--header",1,{top:$("#kana--header-bg").height()-$("#kana--header").height(),ease:Linear.easeOut},"-=1").to("#kana--header-bg",1,{ease:Linear.easeOut,opacity:.25},"-=1").to("#kana--header-bg-back",1,{ease:Linear.easeOut,opacity:1},"-=1")}var n=function(e){var n=$("html").css("font-size");return void 0!==e&&e>0?parseInt(n)*e:parseInt(n)};$("#kana--header").css("top",window.innerHeight-$("#kana--header").outerHeight()+"px");var a=new ScrollMagic.Controller,r=e(),o=new ScrollMagic.Scene({triggerElement:"#kana--head-pin-1",triggerHook:"onLeave",duration:window.innerHeight-n(6)}).setTween(r).addTo(a).on("progress",function(e){if(1==e.progress)return void $("#kana--header").addClass("finished");$("#kana--header").removeClass("finished")});$(window).resize(function(){$(window).scrollTop()<=window.innerHeight&&$(window).scrollTop(0),$("#kana--header-bg").height(window.innerHeight),$("#kana--header").css("top",window.innerHeight-$("#kana--header").outerHeight()+"px"),r.progress(0),r.clear(),r=e(),o.duration(window.innerHeight-n(6)),o.setTween(r),TweenMax.to(".kana-nav-progress",0,{x:window.innerWidth-$(".kana-nav-progress").outerWidth()}),$(document).trigger("scroll")}),$(function(){function e(){i=!1,o=!0,a=TweenMax.to(".kana-nav-progress",.6,{x:window.innerWidth,ease:Circ.easeOut,delay:1,onStart:n})}function n(){i=!1,o=!1}TweenMax.to(".kana-nav-progress",0,{x:window.innerWidth});var a,r,o=!1,i=!1;$(document).scroll(function(n){$(".kana-nav-progress").show();var i=$(window).height(),t=$(document).height(),s=t-i,d=$(window).scrollTop()/s,h=$(".nav-progress").height();$(".nav-progress--arrow").css("top",30+Math.floor(h*d)+"px"),o?(TweenMax.killTweensOf(".kana-nav-progress"),a=TweenMax.to(".kana-nav-progress",.6,{x:window.innerWidth,ease:Circ.easeOut,delay:1}),o=!1):(TweenMax.killTweensOf(".kana-nav-progress"),r=TweenMax.to(".kana-nav-progress",.6,{x:window.innerWidth-$(".kana-nav-progress").outerWidth(),ease:Circ.easeOut,onComplete:e}))}),$(document).trigger("scroll")})});